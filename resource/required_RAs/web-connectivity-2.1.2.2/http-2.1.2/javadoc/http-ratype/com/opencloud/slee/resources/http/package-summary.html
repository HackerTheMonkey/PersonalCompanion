<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_21) on Tue Mar 15 13:33:56 NZDT 2011 -->
<TITLE>
com.opencloud.slee.resources.http (Open Cloud HTTP Resource Adaptor)
</TITLE>

<META NAME="date" CONTENT="2011-03-15">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="com.opencloud.slee.resources.http (Open Cloud HTTP Resource Adaptor)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../com/opencloud/slee/resources/http/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV PACKAGE&nbsp;
&nbsp;NEXT PACKAGE</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?com/opencloud/slee/resources/http/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
Package com.opencloud.slee.resources.http
</H2>
Provides a generic HTTP interface for SLEE services.
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Interface Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/opencloud/slee/resources/http/HttpActivity.html" title="interface in com.opencloud.slee.resources.http">HttpActivity</A></B></TD>
<TD>Represents a single HTTP request/response "transaction".</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/opencloud/slee/resources/http/HttpActivityContextInterfaceFactory.html" title="interface in com.opencloud.slee.resources.http">HttpActivityContextInterfaceFactory</A></B></TD>
<TD>HTTP ActivityContextInterfaceFactory.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/opencloud/slee/resources/http/HttpMessage.html" title="interface in com.opencloud.slee.resources.http">HttpMessage</A></B></TD>
<TD>An HTTP message consisting of some headers and a body.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/opencloud/slee/resources/http/HttpProvider.html" title="interface in com.opencloud.slee.resources.http">HttpProvider</A></B></TD>
<TD>Provider interface for applications that want to send HTTP requests.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/opencloud/slee/resources/http/HttpRequest.html" title="interface in com.opencloud.slee.resources.http">HttpRequest</A></B></TD>
<TD>An HTTP request.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/opencloud/slee/resources/http/HttpResponse.html" title="interface in com.opencloud.slee.resources.http">HttpResponse</A></B></TD>
<TD>An HTTP response</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/opencloud/slee/resources/http/IncomingHttpRequestActivity.html" title="interface in com.opencloud.slee.resources.http">IncomingHttpRequestActivity</A></B></TD>
<TD>An incoming request activity, created when an HTTP request is
 received by the RA.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/opencloud/slee/resources/http/OutgoingHttpRequestActivity.html" title="interface in com.opencloud.slee.resources.http">OutgoingHttpRequestActivity</A></B></TD>
<TD>An outgoing request activity, created when an application sends
 an HTTP request.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/opencloud/slee/resources/http/HttpVersion.html" title="class in com.opencloud.slee.resources.http">HttpVersion</A></B></TD>
<TD>Represents a HTTP version.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package com.opencloud.slee.resources.http Description
</H2>

<P>
<p>Provides a generic HTTP interface for SLEE services.
  The RA is bidirectional, applications can receive incoming HTTP requests and
  also initiate outgoing HTTP requests.</p>

  <p>The RA implements a subset of HTTP/1.1, for use with higher level
  protocols such as MM7 or MM1. Request methods GET, HEAD, POST, PUT and DELETE
  are supported.
  </p>

  <h2>Resource Adaptor Type</h2>

    <h3>Events</h3>
    The HTTP RA emits the following event types:<p>
    <table border="1">
    <tr><td><b>Event ID</b> (&lt;Name&gt; &lt;Version&gt;, &lt;Vendor&gt;)
        <td><b>Event Object</b>
        <td><b>Activity Object</b>
        <td><b>Description</b>
        </tr>
    <tr><td>com.opencloud.slee.resources.http.HttpRequest.GET 1.1, OpenCloud
        <td><A HREF="../../../../../com/opencloud/slee/resources/http/HttpRequest.html" title="interface in com.opencloud.slee.resources.http"><CODE>HttpRequest</CODE></A>
        <td><A HREF="../../../../../com/opencloud/slee/resources/http/IncomingHttpRequestActivity.html" title="interface in com.opencloud.slee.resources.http"><CODE>IncomingHttpRequestActivity</CODE></A>
        <td>An HTTP GET request was received by the RA.
        </tr>
    <tr><td>com.opencloud.slee.resources.http.HttpRequest.POST 1.1, OpenCloud
        <td><A HREF="../../../../../com/opencloud/slee/resources/http/HttpRequest.html" title="interface in com.opencloud.slee.resources.http"><CODE>HttpRequest</CODE></A>
        <td><A HREF="../../../../../com/opencloud/slee/resources/http/IncomingHttpRequestActivity.html" title="interface in com.opencloud.slee.resources.http"><CODE>IncomingHttpRequestActivity</CODE></A>
        <td>An HTTP POST request was received by the RA.
        </tr>
    <tr><td>com.opencloud.slee.resources.http.HttpRequest.HEAD 1.1, OpenCloud
        <td><A HREF="../../../../../com/opencloud/slee/resources/http/HttpRequest.html" title="interface in com.opencloud.slee.resources.http"><CODE>HttpRequest</CODE></A>
        <td><A HREF="../../../../../com/opencloud/slee/resources/http/IncomingHttpRequestActivity.html" title="interface in com.opencloud.slee.resources.http"><CODE>IncomingHttpRequestActivity</CODE></A>
        <td>An HTTP HEAD request was received by the RA.
        </tr>
    <tr><td>com.opencloud.slee.resources.http.HttpRequest.PUT 1.1, OpenCloud
        <td><A HREF="../../../../../com/opencloud/slee/resources/http/HttpRequest.html" title="interface in com.opencloud.slee.resources.http"><CODE>HttpRequest</CODE></A>
        <td><A HREF="../../../../../com/opencloud/slee/resources/http/IncomingHttpRequestActivity.html" title="interface in com.opencloud.slee.resources.http"><CODE>IncomingHttpRequestActivity</CODE></A>
        <td>An HTTP PUT request was received by the RA.
        </tr>   
    <tr><td>com.opencloud.slee.resources.http.HttpRequest.DELETE 1.1, OpenCloud
        <td><A HREF="../../../../../com/opencloud/slee/resources/http/HttpRequest.html" title="interface in com.opencloud.slee.resources.http"><CODE>HttpRequest</CODE></A>
        <td><A HREF="../../../../../com/opencloud/slee/resources/http/IncomingHttpRequestActivity.html" title="interface in com.opencloud.slee.resources.http"><CODE>IncomingHttpRequestActivity</CODE></A>
        <td>An HTTP DELETE request was received by the RA.
        </tr>
    <tr><td>com.opencloud.slee.resources.http.HttpResponse 1.1, OpenCloud
        <td><A HREF="../../../../../com/opencloud/slee/resources/http/HttpResponse.html" title="interface in com.opencloud.slee.resources.http"><CODE>HttpResponse</CODE></A>
        <td><A HREF="../../../../../com/opencloud/slee/resources/http/OutgoingHttpRequestActivity.html" title="interface in com.opencloud.slee.resources.http"><CODE>OutgoingHttpRequestActivity</CODE></A>
        <td>The RA received a response to an earlier outgoing HTTP request. Only one
        response event type is defined (instead of separate 2xx, 3xx etc events) as it is
        assumed that applications will always want to see the HTTP response, regardless
        of the status-code value.
        </tr>
    </table>

    <h3>Activities</h3>
    There are two types of activities created by the HTTP RA:<p>
    <table>
    <tr>
    <td valign="top"><A HREF="../../../../../com/opencloud/slee/resources/http/IncomingHttpRequestActivity.html" title="interface in com.opencloud.slee.resources.http"><CODE>IncomingHttpRequestActivity</CODE></A>:
    <td>This activity is created when the RA receives a HTTP request.
        The activity object has methods for creating and sending a response to the request. The activity
        ends when the response is sent. In addition, if for some reason a SBB does not send a response
        in time, the RA will automatically send an error response back to the client, ending the activity.
        The timeout is specified by the <a href="#properties">IncomingRequestTimeout</a> config property.
    <tr>
    <td valign="top"><A HREF="../../../../../com/opencloud/slee/resources/http/OutgoingHttpRequestActivity.html" title="interface in com.opencloud.slee.resources.http"><CODE>OutgoingHttpRequestActivity</CODE></A>:
    <td>This activity is created when a SBB sends an outgoing
        HTTP request. There is nothing that can be done with the activity, it is only there so that
        the SBB may attach to it in order to receive the response asynchronously.
    </table>

    <h3>Activity Context Interface Factory</h3>
    The ACI Factory interface is <A HREF="../../../../../com/opencloud/slee/resources/http/HttpActivityContextInterfaceFactory.html" title="interface in com.opencloud.slee.resources.http"><CODE>HttpActivityContextInterfaceFactory</CODE></A>.

    <h3>SBB Interface</h3>
    The SBB Interface is <A HREF="../../../../../com/opencloud/slee/resources/http/HttpProvider.html" title="interface in com.opencloud.slee.resources.http"><CODE>HttpProvider</CODE></A>. This interface must be
    used for creating and sending outgoing requests. If the service only deals with incoming requests,
    then this interface does not need to be used.


  <h2 id="properties">Resource Adaptor Config Properties</h2>
    <table border="1">
    <tr><td><b>Name</b>
        <td><b>Type</b>
        <td><b>Default</b>
        <td><b>Description</b>
    <tr><td>ListenAddress
        <td>String
        <td>127.0.0.1
        <td>Local IP address that the HTTP RA will listen on for requests.
    <tr><td>ListenPort
        <td>Integer
        <td>8000
        <td>Local TCP port that the HTTP RA will listen on for requests.
    <tr><td>MaxOutgoingConnections
        <td>Integer
        <td>5
        <td>The maximum number of outgoing TCP connections the RA will open to a single host
            when sending requests to that host.
    <tr><td>OutgoingRequestTimeout
        <td>Long
        <td>10000
        <td>The time (in ms) that the RA will wait for a response to an outgoing request
            before failing the request. The application will see a 500 Server Error response
            and the activity is ended.
    <tr><td>OutgoingIdleTimeout
        <td>Long
        <td>60000
        <td>The time (in ms) that the RA will keep an outgoing TCP connection open for,
            with no activity on the connection.
    <tr><td>IncomingRequestTimeout
        <td>Long
        <td>5000
        <td>The time (in ms) that the RA will wait for the SLEE to send a response to an incoming request
            before failing the request. The RA will automatically send an error response to the client
            and end the activity.
    <tr><td>IncomingIdleTimeout
        <td>Long
        <td>60000
        <td>The time (in ms) that the RA will keep an incoming TCP connection open for,
            with no activity on the connection.
    <tr><td>ServerName
        <td>String
        <td>Rhino-HTTP-Server/1.0
        <td>The default value of the Server header set in outgoing responses. Applications may override
            this by setting the Server header in the response manually.
    <tr><td>UserAgent
        <td>String
        <td>Rhino-HTTP-Client/1.0
        <td>The default value of the User-Agent header set in outgoing requests. Applications may override
            this by setting the User-Agent header in the request manually.
    <tr><td>AddressType
        <td>String
        <td>null
        <td>Defines how the RA generates the <code>javax.slee.Address</code> object for HTTP events. Default is to
            not use any address. Setting this to the value <b>uripath</b> will make the RA use a URI address
            with the value of the path in the request URL - eg. <code>http://localhost/test/zzz?query=yyy</code>
            will create an address with address plan AddressPlan.URI and value "/test/zzz". Responses have no
            address.
    <tr><td>MaxContentLength
        <td>Integer
        <td>262144
        <td>Maximum value in bytes for the Content-Length header of the HTTP messages which have a message body. 
            If this value is exceeded, the application will see a 413 Client Error Response.
    </table>

  <h2>Example Usage</h2>

  <h3>Server</h3>
  Below is an excerpt of SBB code showing how incoming HTTP requests can be processed.
  <pre>
  import com.opencloud.slee.resources.http.*;

  ...

  // SBB event handler
  public void onGET(HttpRequest event, ActivityContextInterface aci) {
      IncomingHttpRequestActivity activity = (IncomingHttpRequestActivity) aci.getActivity();
      // Send a redirect response...
      HttpResponse response = activity.createResponse(302, "Moved Temporarily");
      response.setHeader("Location", "http://anotherserver/index.html");
      try {
          activity.sendResponse(response);
      } catch (IOException e) {
          warn("unable to send response", e);
      }
  }
  </pre>
  <h3>Client</h3>
  Below is an excerpt of SBB code showing how outgoing HTTP requests can be made.
  <pre>
  import com.opencloud.slee.resources.http.*;

  ...

  public void setSbbContext(SbbContext sbbContext) {
      this.sbbContext = sbbContext;
      Context sbbEnv = (Context) new InitialContext().lookup("java:comp/env");
      provider = (HttpProvider) sbbEnv.lookup("slee/resources/http/1.1/provider");
      acif = (HttpActivityContextInterfaceFactory) sbbEnv.lookup("slee/resources/http/1.1/acifactory");
      ...
  }

  public void onSomeEvent(SomeEvent event, ActivityContextInterface aci) {
      ...
      HttpRequest newRequest = provider.createRequest(HttpRequest.POST, new URL("http://someserver/service.jsp"));
      newRequest.setContentAsString("text/plain; charset=\"utf-8\"", "test message");

      OutgoingHttpRequestActivity activity = provider.sendRequest(newRequest);
      ActivityContextInterface newACI = acif.getActivityContextInterface(activity);
      // attach so we will receive response...
      newACI.attach(sbbContext.getSbbLocalObject());
  }

  public void onHttpResponse(HttpResponse event, ActivityContextInterface aci) {
      trace("Received " + event.getStatusCode() + " response");
      byte[] data = event.getContent();   // Or getContentAsString() if appropriate
      // process response content...
  }

  // instance vars
  private SbbContext sbbContext;
  private HttpProvider provider;
  private HttpActivityContextInterfaceFactory acif;
  </pre>
<P>

<P>
<DL>
</DL>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../com/opencloud/slee/resources/http/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV PACKAGE&nbsp;
&nbsp;NEXT PACKAGE</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?com/opencloud/slee/resources/http/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
