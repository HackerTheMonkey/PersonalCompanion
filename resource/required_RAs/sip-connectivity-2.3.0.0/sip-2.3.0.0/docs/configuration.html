<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

    <title>RA Configuration</title>

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link href="css/main.css" rel="stylesheet" type="text/css">
    <link href="css/diameter.css" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="favicon.ico">
</head>

<body>

<div id="wrapper">
    <div id="header"><a href="http://www.opencloud.com/" title="OpenCloud">OpenCloud</a></div>

    <div id="content">
        <div id="content-top"></div>

        <div id="subnav-column" class="diameter">
            <ul class="subnav">
                <li><a href="index.html" title="SIP Connectivity Pack" id="diameter">SIP Connectivity Pack</a></li>
            </ul>
            <ul class="subnav-diameter">
                <li><a href="release-notes.html" title="Release Notes" id="release-notes">Release Notes</a></li>
                <li><a href="getting-started.html" title="Getting Started" id="getting-started">Getting Started</a></li>
                <li><strong>RA Configuration</strong></li>
                <li><a href="features.html" title="Features" id="features">RA Features</a></li>
                <li><a href="ratype.html" title="RA Type" id="ratype">RA Type Overview</a></li>
                <li><a href="examples.html" title="Examples" id="examples">Example Applications</a></li>
            </ul>
        </div>

        <div id="content-column">

            <div id="content-column-text">
                <div class="h1-header">
                    <h1>RA Configuration</h1>
                </div>

                <p>This page describes the configuration properties of the SIP RA. These properties are
                passed to the <code>createRAEntity</code> management operation, when deploying the SIP RA.</p>

                <h2>Network Address Properties</h2>

                <p>These properties define the IP address, ports and transports that the SIP RA entity
                will be using. The default configuration is to listen on all interfaces, using UDP
                and TCP, on port 5060.</p>

                <table>
                    <tr>
                        <th>Property Name</th>
                        <th>Description</th>
                        <th>Values (Default)</th>
                    </tr>
                    <tr>
                        <td>IPAddress</td>
                        <td>The IP address the SIP RA will listen on. The value AUTO means the RA will
                            listen all interfaces and use the host's primary IP address in outgoing headers.
                            An IP address range may also be used, using address/mask notation, e.g.
                            "192.168.0.0/24". This will select the matching IP address on the node, if one exists.
                            This may be useful in a cluster where nodes have IP addresses on the
                            same subnet.
                        </td>
                        <td>A hostname, IP address, IP address range or AUTO (AUTO)</td>
                    </tr>
                    <tr>
                        <td>VirtualAddresses</td>
                        <td>
        Hostnames and/or IP addresses that are local to the cluster. Required when a load
        balancer is providing a virtual IP address (VIP) for the Rhino cluster.
                            <br><br>
        The RA treats incoming messages routed to the VIP as if they were local, e.g.
        <a href="api/jsip-ratype/net/java/slee/resource/sip/SleeSipProvider.html#isLocalSipURI(javax.sip.address.SipURI)">isLocalSipURI()</a>
        will return true if the URI's host field matches one of these virtual addresses.
                            <br><br>
        If this property is set, and the UseVirtualAddressInURIs property is set to
        true, the first name in the list will be used in SIP URIs generated by the RA,
        so that requests are routed back to the VIP, and not a specific node.
        The first name should be the fully-qualified hostname corresponding to the VIP.
                            <br><br>
        By default this property is empty, meaning the SIP RA will use the node's
        IP address (as determined by the IPAddress property) in SIP URIs.
                        </td>
                        <td>List of hostnames or IP addresses (None)</td>
                    </tr>
                    <tr>
                        <td>UseVirtualAddressInURIs</td>
                        <td>
        Specifies whether to use the configured VirtualAddress in SIP URIs generated by the
        SIP RA. If true (default), the first address in the VirtualAddresses property will be
        used for the host part in SIP URIs. Otherwise, the node's IP address (as determined by
        the IPAddress property) will be used.
                        </td>
                        <td>true, false (true)</td>
                    </tr>
                    <tr>
                        <td>ViaSentByAddress</td>
                        <td>
        Specifies an address (IP address or hostname) that will be used in the "sent-by"
        field of Via headers added by the SIP RA. By default this property is empty, and the
        SIP RA will use the local IP address of the node. In some scenarios it may be necessary
        to override the default and use a virtual server address.
                        </td>
                        <td>A hostname or IP address (None)</td>
                    </tr>
                    <tr>
                        <td>Port</td>
                        <td>Port that will be used for unencrypted SIP transports (UDP, TCP).</td>
                        <td>An integer port number (5060).</td>
                    </tr>
                    <tr>
                        <td>SecurePort</td>
                        <td>Port that will be used for encrypted SIP transports (TLS).</td>
                        <td>An integer port number (5061).</td>
                    </tr>
                    <tr>
                        <td>Transports</td>
                        <td>Supported SIP transports. The RA will open listen sockets for these transports.</td>
                        <td>A comma-separated list containing one or more of UDP, TCP or TLS ("UDP,TCP").</td>
                    </tr>
                    <tr>
                        <td>OffsetPorts</td>
                        <td>Required when running multiple cluster nodes on the same host.
                            If true, the RA will automatically add an offset to the SIP port number
                            so that each SIP RA instance gets a different port number.
                            See <code>PortOffset</code> below.</td>
                        <td>true, false (false)</td>
                    </tr>
                    <tr>
                        <td>PortOffset</td>
                        <td>Required when running multiple cluster nodes on the same host. If <code>OffsetPorts</code>
                            is enabled, the SIP RA's port will be calculated as <code>Port + (NodeID - PortOffset)</code>.
                            Typically the <code>PortOffset</code> value used is the lowest NodeID in the cluster.
                            So if Port is 5060, and the lowest NodeID is 101, and the cluster has nodes 101, 102 and
                            103, the SIP ports used will be 5060, 5061 and 5062 respectively.</td>
                        <td>An integer NodeID, usually the value of the lowest NodeID in the cluster (none).</td>
                    </tr>
                </table>

                <h2>SIP RA Features</h2>

                <table>
                    <tr>
                        <th>Property Name</th>
                        <th>Description</th>
                        <th>Values (Default)</th>
                    </tr>                <tr>
                    <td>Automatic100TryingSupport</td>
                    <td>If enabled, the RA will automatically generate 100 Trying responses for INVITEs.</td>
                    <td>true, false (true)</td>
                </tr>
                    <tr>
                        <td>ReplicatedDialogSupport</td>
                        <td>Enables support for replicating SIP dialog state, so that dialog activities can
                            continue on other cluster nodes after a node failure. Requires a clustered production
                            Rhino installation.</td>
                        <td>true, false (false)</td>
                    </tr>
                    <tr>
                        <td>ExtensionMethods</td>
                        <td>SIP methods that can initiate dialogs, in addition to the standard INVITE and SUBSCRIBE methods.</td>
                        <td>A comma-separated list of SIP method names (none).</td>
                    </tr>
                    <tr>
                        <td>WorkerPoolSize</td>
                        <td>Number of worker threads the SIP RA will use to process incoming messages.
                            If zero, the RA will receive and process messages in the same I/O thread.
                            Otherwise, the pool will be used so that incoming messages can be processed
                            concurrently.</td>
                        <td>Integer, 0 or more (4).</td>
                    </tr>
                    <tr>
                        <td>WorkerQueueSize</td>
                        <td>Queue size for the worker thread pool. If the queue fills then the RA will
                            drop packets (UDP) or temporarily suspend reads (TCP).</td>
                        <td>Integer, 1 or more (50).</td>
                    </tr>
                <tr>
                    <td>TCPIOThreads</td>
                    <td>Number of threads for handling TCP I/O. TCP connections will be divided between
                        the I/O threads.</td>
                    <td>Integer, 1 or more (1).</td>
                </tr>
            </table>


                <h2>SSL/TLS Properties</h2>

                <p>These properties must be specified when the <code>Transports</code> property contains "TLS".</p>

                <table>
                    <tr>
                        <th>Property Name</th>
                        <th>Description</th>
                        <th>Values (Default)</th>
                    </tr>                    <tr>
                        <td>Keystore</td>
                        <td>The name of a keystore file used to store private key material.</td>
                        <td>A file name (sip-ra-ssl.keystore).</td>
                    </tr>
                    <tr>
                        <td>Truststore</td>
                        <td>The name of a truststore file containing trusted CA certificates.</td>
                        <td>A file name (sip-ra-ssl.truststore).</td>
                    </tr>
                    <tr>
                        <td>KeystorePassword</td>
                        <td>Password to unlock the keystore.</td>
                        <td>A string (none).</td>
                    </tr>
                    <tr>
                        <td>TruststorePassword</td>
                        <td>Password to unlock the truststore.</td>
                        <td>A string (none).</td>
                    </tr>
                    <tr>
                        <td>KeystoreType</td>
                        <td>The type of keystore implementation.</td>
                        <td>A keystore type name (jks).</td>
                    </tr>
                    <tr>
                        <td>TruststoreType</td>
                        <td>The type of truststore implementation.</td>
                        <td>A truststore type name (jks).</td>
                    </tr>
                    <tr>
                        <td>CRLURL</td>
                        <td>The location of a certificate revocation list.</td>
                        <td>A URL (none).</td>
                    </tr>
                    <tr>
                        <td>CRLRefreshTimeout</td>
                        <td>The certificate revocation list refresh timeout.</td>
                        <td>A duration in seconds (86400).</td>
                    </tr>
                    <tr>
                        <td>CRLLoadFailureRetryTimeout</td>
                        <td>The certificate revocation list load failure timeout.</td>
                        <td>A duration in seconds (900).</td>
                    </tr>
                    <tr>
                        <td>CRLNoCRLLoadFailureRetryTimeout</td>
                        <td>The certificate revocation list load failure retry timeout.</td>
                        <td>A duration in seconds (60).</td>
                    </tr>
                    <tr>
                        <td>ClientAuthentication</td>
                        <td>Indicate whether clients need to be authenticated against certificates in the truststore.</td>
                        <td>NEED, WANT, or NONE (NEED).</td>
                    </tr>
                </table>

            </div>
        </div>
    </div>

    <div id="footer">
        <ul>
            <li></li>
        </ul>

        <p class="copyright">&copy; OpenCloud Limited 2007-2010</p>
    </div>
</div>
</body>
</html>
