SIP Examples 2.3.0.0

Changes between SIP Examples 2.2_06 and 2.3.0.0
===============================================

   * OCSIP Resource Adaptor 2.3.0.0
      * SBBs may call non-I/O methods on the SleeSipProvider when the RA entity
        is inactive, for example accessing the SIP factories to create URIs or
        headers. Previously this would have resulted in an exception.
      * A rate limit can optionally be applied to new dialogs using the
        "inbound_initial_requests" rate limiter. Initial requests on new dialogs
        may be rejected, but mid-dialog requests on existing dialogs will be allowed.
      * The IPAddress config property may now be specified with address/mask
        notation. For example "192.168.0.0/24" means that the SIP RA will bind
        to the matching 192.168.0.x address on the host. May be useful in clusters.
      * A more efficient implementation of SIP protocol timers means that memory
        can be reclaimed faster when timers are cancelled, reducing overall
        memory usage.

Changes between SIP Examples 2.2_05 and 2.2_06
==============================================

   * OCSIP Resource Adaptor 2.2_06
      * Avoid unnecessary DNS lookup when deciding if an OPTIONS request should
        be handled by the RA.
      * Fixed implementation of isLocalSipURI() so that it correctly uses the 
        "maddr" parameter, if present.
      * Support dialogs where the initial remote sequence number is 0.

Changes between SIP Examples 2.2_04 and 2.2_05
==============================================

   * OCSIP Resource Adaptor 2.2_05
      * Fixed bug that caused forked dialog creation to fail when using replicated
        dialogs, when the forked dialog was created by a 2xx with a new to-tag.

Changes between SIP Examples 2.2_03 and 2.2_04
==============================================

   * OCSIP Resource Adaptor 2.2_04
      * Added "UseVirtualAddressInURIs" property, to allow user to specify whether
        or not the RA will use its virtual address (if configured) in SIP URIs
        generated by the RA.
      * Update Contact header transport in outgoing requests, if it differs
        from the resolved transport of the next-hop address.
      * Default transport used in RA-generated URIs can be changed by changing
        the order transports appear in the "Transports" config property, i.e.
        UDP will be preferred if it appears before TCP.
      * Fixed bug where SleeSipProvider.forwardForkedResponse() would always
        override the Contact header. Apps may set their own header in the
        response (using response.setHeader()) before calling forwardForkedResponse().
      * Fixed bug from 2.2_03 where Request-URI would always get replaced in
        initial outgoing requests on a dialog.


Changes between SIP Examples 2.2_02 and 2.2_03
==============================================

   * OCSIP Resource Adaptor 2.2_03
      * Fixed bug that caused dialog-creating 2xx responses to be dropped, if
        they had a different remote tag to existing early dialogs resulting
        from a fork.
      * Fixed bug where the remote target of an early client dialog was not
        updated when the 2xx response arrived.
      * Add "oc-node" parameter to local Via headers and SIP URIs created by
        the RA, may be useful with load balancers in some scenarios.
      * Allow apps to override the Contact header in reliable provisional
        responses.
      * When forwarding responses between dialogs, RA preserves Contact header
        in 3xx-6xx responses, unless replaced by the application.
      * Fixed bug that caused scenarios using reliable provisional responses
        and forking to fail.
      * Fixed bug in implementation of SleeSipProvider.getNewDialog(from,to)
        that caused client dialogs to fail.
      
Changes between SIP Examples 2.2_01 and 2.2_02
==============================================

   * OCSIP Resource Adaptor 2.2_02
      * Fix bug that could cause client transactions to leak if they timed
        out after their associated dialog was removed.
      * Be more forgiving if incoming messages illegally contain multiple
        values for a single-value header, silently ignore additional headers.
      * Send "491 Request Pending" response if a re-INVITE is received while
        waiting for the ACK from a previous INVITE.
      * If an initial persistent connection attempt fails with a transport
        error, raise an alarm, but keep the connection activity open and retry
        the connection, rather than shutting it down.
      * Support OCSIP RA Type 2.2.

   * OCSIP RA Type 2.2
      * Provides extension RSeqHeader and RAckHeader interfaces that accept
        long sequence number values (up to 2^32 - 1).
      * Added OCSleeSipProvider.getNodeID() method.


Changes between SIP Examples 2.2 and 2.2_01
===========================================

   * OCSIP Resource Adaptor 2.2_01
      * Fixed bugs in forked dialog handling.

   * B2BUA service: mask dialog forked events so they will be processed by a
     new root SBB entity.

Changes between SIP Examples 2.1_01 and 2.2
===========================================

   * OCSIP RA Type 2.1
     * Provide new getNewDialog() variants that allow apps to specify the
       Call-ID and local-tag for new outgoing dialogs, see
       com.opencloud.javax.sip.slee.OCSleeSipProvider.
     * Provide associateServerTransaction()/getAssociatedServerTransaction()
       methods on com.opencloud.javax.sip.ClientTransaction, allows a server
       transaction to be associated with a client transaction when no dialog
       is present.
     * Provide methods to specify when compact forms of SIP headers should be
       used, see com.opencloud.javax.sip.OCMessage.

   * OCSIP Resource Adaptor 2.2
     * Supports OCSIP RA Type 2.1.
     * Fixed an issue that could eventually cause the JVM to run out of permgen
       space after many deploy/undeploy cycles.
     * Fixed bug in Dialog.getLocalSeqNumber()/getRemoteSeqNumber().


Changes between SIP Examples 2.0 and 2.1_01
===========================================

   * OCSIP Resource Adaptor 2.1_01
     * Fixed issue where response events were being dropped on mid-dialog client
       transaction activities.
     * Fixed issue where RA would fail to activate if TLS was enabled.
     * Allow apps to override Contact header used when creating dialogs.
     * Implemented workaround for JDK 1.6.0_10 CharBuffer bug, that could cause
       SIP parser to fail in some cases.
       See http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6795561.

   * B2BUA now uses the location service to lookup registered contact addresses.

Changes between SIP Examples 2.0 and 2.1
==========================================

   * OCSIP Resource Adaptor 2.1
      * Supports SLEE API changes from SLEE 1.1-PFD to SLEE 1.1-final.
        *** Requires Rhino 2.0 GA ***
      * Supports JSIP RA Type changes from SLEE 1.1-PFD to SLEE 1.1-final.
      * Improved throughput in FT mode.
      * Improved SIP message cloning performance.
      * Fixed some memory leaks that could occur in FT mode.
      * Proprietary headers now implement javax.sip.header.ExtensionHeader,
        for backward compatibility.
      * Several enhancements to the SIP stack's worker thread pool:
         - Ensure that messages with the same Call-ID are always processed
           in the same order they arrived from the network.
         - I/O threads responsible for receiving messages will never block,
           all blocking work is done in the thread pool.
         - If the pool is overloaded, reads from the busy TCP socket are
           temporarily suspended, so that the TCP stack will apply flow control,
           rather than blocking the I/O thread.
      * Added a stats interface (see "rhino-stats -l SIP") for monitoring
        the thread pool, transport and transaction statistics.      

   * Added SIP PUBLISH support to Presence examples.

   See docs/index.html for more information about this release.


Changes between SIP Examples 1.5.3 and 2.0
==========================================

   * OCSIP Resource Adaptor 2.0 now supports JAIN SIP 1.2 and SLEE 1.1.
     *** Requires Rhino 2.0 ***
   * Added JAIN SIP 1.2 RA Type, based on recommendation in Appendix D
     of SLEE 1.1 specification.
   * OCSIP 2.0 RA Type replaces OCSIP 1.4.1 RA Type, see docs/ratype.html. 

   See docs/index.html for more information about this release.


Changes between SIP Examples 1.5.2 and 1.5.3
============================================

   * OCSIP Resource Adaptor 1.5.3:
      * Fixed bug where RA was incorrectly trying to process CANCELs as mid-dialog
        requests.
      * Fixed bug that prevented 1xx responses from being passed up to an application 
        that used the stateless SipProvider.sendRequest() method.


Changes between SIP Examples 1.5.1 and 1.5.2
============================================

   * OCSIP Resource Adaptor 1.5.2:
      * Fixed NullPointerException that occurred when creating mid-dialog ACK requests.


Changes between SIP Examples 1.5 and 1.5.1
==========================================

   * OCSIP Resource Adaptor 1.5.1:
      * Fixed bug that could cause client transaction activities to be left in an
        undefined state.
      * Fixed bug that could cause dialog state to not be initialized correctly
        if some provisional responses were received without to-tags.  
   

Changes between SIP Examples 1.2.3 and 1.5
============================================

   * OCSIP Resource Adaptor 1.5:
      * Uses an updated replicated storage API for replicating dialog state.
        This is so that Rhino can better manage creation and removal of the 
        underlying database.
      * This change means that the OCSIP RA now REQUIRES Rhino 1.4.5 or greater.
        It will NOT deploy on Rhino 1.4.4 or earlier anymore. Use the previous 
        version if Rhino 1.4.4 support is required.
      * Messages that are invalid or fail parsing will be logged at WARN level
        using the "sip.fail" logger, instead of failing silently.
      * Documentation now located in docs directory, see docs/index.html.


Changes between SIP Examples 1.2.2 and 1.2.3
============================================

   * OCSIP Resource Adaptor 1.4.3:
      * Change handling of forked dialogs so that all early dialogs are ended as soon
        as one of the dialogs is confirmed or terminated.
      * If a late 2xx response arrives for a forked dialog, the RA will ACK it and send
        a BYE to tear down the dialog at the server's end, like a UAC would. Late 2xx
        responses will not be passed to the SBB.
      * Forked server dialogs are associated with the original server transaction. When
        the transaction ends by sending a final response, all early dialogs associated
        with the transaction are ended.

   * OCSIP Resource Adaptor Type 1.4.1:
      * RA type version changed since forking behaviour has changed. See javadoc for
        com.opencloud.javax.sip.DialogForkedEvent.


Changes between SIP Examples 1.2.1 and 1.2.2
============================================

   * OCSIP Resource Adaptor 1.4.2:
      * Fixed a bug that caused 100 Trying responses with to-tags to be
        incorrectly treated as dialog-creating responses.


Changes between SIP Examples 1.2 and 1.2.1
==========================================

   * OCSIP Resource Adaptor 1.4.1:
      * Fixed a NullPointerException that could occur if a forked response
        arrived for a dialog that had already ended.
      * Fixed a synchronization bug in Dialog.getLocalTag().

Changes between SIP Examples 1.0_06 and 1.2
=============================================

   * Updated to OCSIP Resource Adaptor Type 1.4:
      * Added methods to com.opencloud.javax.sip.SipProvider to obtain
        local host information, see javadoc for details:
        - getLocalSipURI()
        - getLocalVia()
        - isLocalSipURI()
        - isLocalHostname()
        These methods are useful when running SBBs in a cluster, where the local
        hostname or port may not be known in advance.
      * Late 2xx responses to INVITE will be delivered on the Dialog activity,
        if a matching dialog is found.
      * Added DialogForkedEvent, fired when forked responses are detected. See
        javadoc for com.opencloud.javax.sip.DialogForkedEvent, and B2BUA example.

   * Updated to OCSIP Resource Adaptor 1.4:
      * Support for replicated Dialog activities. If enabled, confirmed
        dialogs are replicated and available to all nodes in the cluster.
        NB. Enabling this feature requires Rhino 1.4.5 or later.
      * Configuration of RA listening addresses has been simplified, RA instances
        will automatically choose an appropriate listen address and source address
        for the node they are running on.
      * See javadoc/com/opencloud/javax/sip/slee/ra.html for details of above.

   * Updated B2BUA example to use replicated dialog activities and handle forked
     responses.
